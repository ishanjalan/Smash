import{d as Ye,f as _,a as m,e as y,c as le}from"../chunks/B2hMdp0w.js";import{p as Me,f as R,b as Ve,e as qe,d as s,s as u,$ as Je,n as h,r as t,g as r,u as Ke,a as D,t as A,c as l}from"../chunks/B6pf1Lel.js";import{s as q}from"../chunks/B5McELYr.js";import{i as F}from"../chunks/CdHX5Yt-.js";import{H as Qe,F as Ze,a as ea,t as ce,f as aa,b as C,d as ra,T as ta,e as sa,g as oa,c as na}from"../chunks/hVPv6d8V.js";import{h as ia,s as fe,a as ve,b as da}from"../chunks/D5PGl7_s.js";import{b as la}from"../chunks/DH98gRLd.js";import{_ as ca,U as fa,a as va,e as ua,L as ue,f as ga,r as pa,D as ma,b as ba}from"../chunks/B9MancQR.js";import{b as _a}from"../chunks/BvibNTYV.js";import{G as ha,f as xa}from"../chunks/CwJCbKF7.js";import{A as ge}from"../chunks/bpe3pNzJ.js";import{C as wa}from"../chunks/D4BdhZZ8.js";var ya=_('<div role="button" tabindex="0"><input type="file" accept=".pdf,application/pdf" class="hidden"/> <div class="flex flex-col items-center justify-center gap-4 px-6"><div class="flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500/20 to-red-500/20"><!></div> <p class="text-lg font-medium text-surface-200">Drop a PDF here or click to browse</p></div></div>'),Da=_('<div class="flex flex-col items-center justify-center py-16"><!> <p class="text-surface-400">Loading page thumbnails...</p></div>'),ka=_('<div draggable="true"><img class="w-full aspect-[3/4] object-cover bg-surface-800"/> <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-2"><!></div> <div class="absolute top-1 left-1 bg-black/70 text-white text-xs font-bold px-1.5 py-0.5 rounded"> </div></div>'),Pa=_('<div class="mb-4"><div class="h-2 bg-surface-700 rounded-full overflow-hidden"><div class="h-full bg-gradient-to-r from-orange-500 to-red-500 transition-all"></div></div></div>'),Ra=_('<div class="mb-4 p-4 rounded-xl bg-green-500/10 border border-green-500/30"><div class="flex items-center justify-between"><p class="text-green-400 font-medium flex items-center gap-2"><!> Reorder complete!</p> <button class="flex items-center gap-2 rounded-lg bg-green-500 px-3 py-1.5 text-sm font-medium text-white hover:bg-green-600"><!> Download</button></div></div>'),Fa=_("<!> Saving...",1),La=_("<!> Save New Order",1),Ua=_('<div class="glass rounded-2xl p-4 mb-4"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><!> <div><p class="font-medium text-surface-200"> </p> <p class="text-sm text-surface-500"> </p></div></div> <button class="p-2 text-surface-500 hover:text-red-400"><!></button></div></div> <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3 mb-6"></div> <!> <!> <button class="w-full flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 px-6 py-3 text-base font-semibold text-white shadow-lg transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"><!></button>',1),ja=_('<div class="flex min-h-screen flex-col"><!> <div class="fixed inset-0 -z-10 overflow-hidden"><div class="absolute -top-1/2 -right-1/4 h-[800px] w-[800px] rounded-full bg-gradient-to-br from-orange-500/10 to-red-500/10 blur-3xl"></div></div> <main class="flex-1 px-4 sm:px-6 lg:px-8 pt-28 pb-12"><div class="mx-auto max-w-5xl"><div class="text-center mb-8"><div class="inline-flex items-center gap-2 rounded-full bg-orange-500/10 px-4 py-1.5 text-sm font-medium text-orange-400 mb-4"><!> Reorder Pages</div> <h1 class="text-3xl font-bold text-surface-100">Drag and drop to reorder</h1> <p class="mt-2 text-surface-500">Rearrange pages by dragging them to a new position</p></div> <!></div></main> <!></div> <!>',1);function Ha(pe,me){Me(me,!0),typeof window<"u"&&(ca.workerSrc=`${_a}/pdf.worker.min.mjs`);let o=D(null),L=D(!1),N=D(!1),x=D(null),B=D(0),G,I=D(!1),k=D(null);const be=Ke(()=>r(o)!==null);function _e(){return`pdf-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async function he(e){const a=await e.arrayBuffer(),n=await ua({data:a}).promise,v=[];for(let f=1;f<=n.numPages;f++){const g=await n.getPage(f),w=g.getViewport({scale:.3}),P=document.createElement("canvas");P.width=w.width,P.height=w.height;const U=P.getContext("2d");await g.render({canvasContext:U,viewport:w}).promise,v.push({pageNum:f,thumbnail:P.toDataURL("image/jpeg",.6)})}return v}async function J(e){const a=e.find(v=>v.type==="application/pdf"||v.name.endsWith(".pdf"));if(!a){C.error("Please select a PDF file");return}r(o)&&URL.revokeObjectURL(r(o).originalUrl),l(N,!0);const n={id:_e(),file:a,originalUrl:URL.createObjectURL(a),pages:[]};try{n.pageCount=await va(a),n.pages=await he(a)}catch(v){console.warn("Failed to load PDF:",v),C.error("Failed to load PDF"),l(N,!1);return}l(o,n,!0),l(x,null),l(N,!1),C.success("PDF loaded - drag pages to reorder")}function xe(){r(o)&&(URL.revokeObjectURL(r(o).originalUrl),l(o,null),l(x,null))}async function we(){if(!(!r(o)||r(o).pages.length===0)){l(L,!0),l(B,0);try{const e=await pa(r(o).file,{newOrder:r(o).pages.map(a=>a.pageNum),onProgress:a=>{l(B,a,!0)}});l(x,e,!0),C.success("Pages reordered!")}catch(e){console.error("Reorder error:",e),C.error(e instanceof Error?e.message:"Reorder failed")}finally{l(L,!1)}}}function ye(){if(!r(x)||!r(o))return;const e=ba(r(o).file.name,"reorder"),a=URL.createObjectURL(r(x)),n=document.createElement("a");n.href=a,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}function De(e,a){l(k,a,!0),e.dataTransfer&&(e.dataTransfer.effectAllowed="move")}function ke(e,a){if(e.preventDefault(),r(k)!==null&&r(k)!==a&&r(o)){const n=r(o).pages.findIndex(f=>f.pageNum===r(k)),v=r(o).pages.findIndex(f=>f.pageNum===a);if(n!==-1&&v!==-1){const f=[...r(o).pages],[g]=f.splice(n,1);f.splice(v,0,g),l(o,{...r(o),pages:f},!0)}}}function Pe(){l(k,null),l(x,null)}function Re(e){e.preventDefault(),l(I,!0)}function Fe(e){e.preventDefault();const a=e.currentTarget.getBoundingClientRect();(e.clientX<a.left||e.clientX>a.right||e.clientY<a.top||e.clientY>a.bottom)&&l(I,!1)}function Le(e){e.preventDefault()}async function Ue(e){e.preventDefault(),l(I,!1),e.dataTransfer?.files&&e.dataTransfer.files.length>0&&await J(Array.from(e.dataTransfer.files))}function K(){G?.click()}async function je(e){const a=e.target;a.files&&await J(Array.from(a.files)),a.value=""}var Q=ja();ia("c27bd0",e=>{qe(()=>{Je.title="Reorder Pages - Smash"})});var z=R(Q),Z=s(z);Qe(Z,{});var H=u(Z,4),ee=s(H),$=s(ee),ae=s($),Oe=s(ae);ge(Oe,{class:"h-4 w-4"}),h(),t(ae),h(4),t($);var Te=u($,2);{var Ce=e=>{var a=ya();a.__click=K,a.__keydown=p=>p.key==="Enter"&&K();var n=s(a);n.__change=je,la(n,p=>G=p,()=>G);var v=u(n,2),f=s(v),g=s(f);fa(g,{class:"h-8 w-8 text-orange-400"}),t(f),h(2),t(v),t(a),A(()=>fe(a,1,`relative overflow-hidden rounded-2xl border-2 border-dashed transition-all duration-300 cursor-pointer py-16 ${r(I)?"border-accent-start bg-accent-start/10 scale-[1.02]":"border-surface-700 hover:border-surface-600 bg-surface-900/50"}`)),y("dragenter",a,Re),y("dragleave",a,Fe),y("dragover",a,Le),y("drop",a,Ue),m(e,a)},Ne=e=>{var a=le(),n=R(a);{var v=g=>{var p=Da(),w=s(p);ue(w,{class:"h-12 w-12 text-accent-start animate-spin mb-4"}),h(2),t(p),m(g,p)},f=g=>{var p=le(),w=R(p);{var P=U=>{var re=Ua(),W=R(re),te=s(W),X=s(te),se=s(X);ra(se,{class:"h-6 w-6 text-surface-400"});var oe=u(se,2),Y=s(oe),Ee=s(Y,!0);t(Y);var ne=u(Y,2),Se=s(ne);t(ne),t(oe),t(X);var M=u(X,2);M.__click=xe;var Ae=s(M);ta(Ae,{class:"h-5 w-5"}),t(M),t(te),t(W);var V=u(W,2);sa(V,29,()=>r(o).pages,d=>d.pageNum,(d,i)=>{var c=ka(),b=s(c),j=u(b,2),O=s(j);ha(O,{class:"h-5 w-5 text-white"}),t(j);var S=u(j,2),Xe=s(S,!0);t(S),t(c),A(T=>{fe(c,1,`relative group cursor-grab active:cursor-grabbing rounded-xl overflow-hidden border-2 ${r(k)===r(i).pageNum?"opacity-50 border-accent-start":"border-transparent hover:border-surface-600"} transition-all`),ve(b,"src",r(i).thumbnail),ve(b,"alt",`Page ${r(i).pageNum??""}`),q(Xe,T)},[()=>r(o).pages.indexOf(r(i))+1]),y("dragstart",c,T=>De(T,r(i).pageNum)),y("dragover",c,T=>ke(T,r(i).pageNum)),y("dragend",c,Pe),oa(c,()=>xa,()=>({duration:200})),m(d,c)}),t(V);var ie=u(V,2);{var Be=d=>{var i=Pa(),c=s(i),b=s(c);t(c),t(i),A(()=>da(b,`width: ${r(B)??""}%`)),m(d,i)};F(ie,d=>{r(L)&&d(Be)})}var de=u(ie,2);{var Ge=d=>{var i=Ra(),c=s(i),b=s(c),j=s(b);wa(j,{class:"h-4 w-4"}),h(),t(b);var O=u(b,2);O.__click=ye;var S=s(O);ma(S,{class:"h-3 w-3"}),h(),t(O),t(c),t(i),ce(1,i,()=>na,()=>({y:10,duration:200})),m(d,i)};F(de,d=>{r(x)&&d(Ge)})}var E=u(de,2);E.__click=we;var ze=s(E);{var He=d=>{var i=Fa(),c=R(i);ue(c,{class:"h-5 w-5 animate-spin"}),h(),m(d,i)},We=d=>{var i=La(),c=R(i);ge(c,{class:"h-5 w-5"}),h(),m(d,i)};F(ze,d=>{r(L)?d(He):d(We,!1)})}t(E),A(d=>{q(Ee,r(o).file.name),q(Se,`${d??""} â€¢ ${r(o).pageCount??""} pages`),E.disabled=r(L)},[()=>ga(r(o).file.size)]),m(U,re)};F(w,U=>{r(o)&&U(P)},!0)}m(g,p)};F(n,g=>{r(N)?g(v):g(f,!1)},!0)}m(e,a)};F(Te,e=>{r(be)?e(Ne,!1):e(Ce)})}t(ee),t(H);var Ie=u(H,2);Ze(Ie),t(z);var $e=u(z,2);ea($e,{}),ce(1,$,()=>aa,()=>({duration:200})),m(pe,Q),Ve()}Ye(["click","keydown","change"]);export{Ha as component};
