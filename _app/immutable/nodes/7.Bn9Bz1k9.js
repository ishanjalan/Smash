import{c as Ce,a as E,d as yr,f as U,e as Je}from"../chunks/B2hMdp0w.js";import{f as be,p as wr,a as Me,h as xr,d as m,s as R,t as ie,g as c,b as kr,c as ne,u as Fe,e as Rr,$ as Lr,n as ke,r as g}from"../chunks/B6pf1Lel.js";import{s as oe}from"../chunks/B5McELYr.js";import{l as yt,s as wt,i as X}from"../chunks/CdHX5Yt-.js";import{I as xt,s as kt,H as Sr,e as Ve,F as Or,a as Er,t as Ge,b as Ze,i as Et,f as Pr,c as Pt,d as Tt,T as Tr,h as Cr,C as Ar}from"../chunks/BzTW8vK3.js";import{h as Dr,d as $r,s as Ct,a as Ir,b as Mr}from"../chunks/BiLWwA0e.js";import{b as Nr}from"../chunks/DH98gRLd.js";import{n as qr,_ as Ur,e as jr,P as Fr,S as Gr,q as zr,g as Br,a as Wr,U as At,f as Hr,L as Dt,D as Yr}from"../chunks/BW6OrMhS.js";import{c as Kr}from"../chunks/TDtrdbi3.js";import{b as Jr}from"../chunks/D1eVoUTD.js";import{F as $t}from"../chunks/CXGpbS2p.js";import{S as Vr}from"../chunks/D_l1NbVp.js";import"../chunks/iFr6U_qS.js";import{C as It}from"../chunks/BYfOsS-Y.js";function Zr(n,o){const e=yt(o,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];xt(n,wt({name:"clock"},()=>e,{get iconNode(){return f},children:(s,i)=>{var h=Ce(),y=be(h);kt(y,o,"default",{}),E(s,h)},$$slots:{default:!0}}))}function Mt(n,o){const e=yt(o,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"m5 11-3 3"}],["path",{d:"m5 17-3-3h10"}]];xt(n,wt({name:"file-output"},()=>e,{get iconNode(){return f},children:(s,i)=>{var h=Ce(),y=be(h);kt(y,o,"default",{}),E(s,h)},$$slots:{default:!0}}))}function Qr(n,o){const e=yt(o,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];xt(n,wt({name:"languages"},()=>e,{get iconNode(){return f},children:(s,i)=>{var h=Ce(),y=be(h);kt(y,o,"default",{}),E(s,h)},$$slots:{default:!0}}))}var Qe={exports:{}},Nt;function Xr(){return Nt||(Nt=1,(function(n){var o=(function(e){var f=Object.prototype,s=f.hasOwnProperty,i=Object.defineProperty||function(r,t,a){r[t]=a.value},h,y=typeof Symbol=="function"?Symbol:{},S=y.iterator||"@@iterator",C=y.asyncIterator||"@@asyncIterator",P=y.toStringTag||"@@toStringTag";function A(r,t,a){return Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{A({},"")}catch{A=function(t,a,_){return t[a]=_}}function B(r,t,a,_){var p=t&&t.prototype instanceof se?t:se,x=Object.create(p.prototype),j=new W(_||[]);return i(x,"_invoke",{value:Re(r,a,j)}),x}e.wrap=B;function G(r,t,a){try{return{type:"normal",arg:r.call(t,a)}}catch(_){return{type:"throw",arg:_}}}var V="suspendedStart",k="suspendedYield",O="executing",Z="completed",N={};function se(){}function D(){}function Q(){}var _e={};A(_e,S,function(){return this});var he=Object.getPrototypeOf,ce=he&&he(he(pe([])));ce&&ce!==f&&s.call(ce,S)&&(_e=ce);var ee=Q.prototype=se.prototype=Object.create(_e);D.prototype=Q,i(ee,"constructor",{value:Q,configurable:!0}),i(Q,"constructor",{value:D,configurable:!0}),D.displayName=A(Q,P,"GeneratorFunction");function ye(r){["next","throw","return"].forEach(function(t){A(r,t,function(a){return this._invoke(t,a)})})}e.isGeneratorFunction=function(r){var t=typeof r=="function"&&r.constructor;return t?t===D||(t.displayName||t.name)==="GeneratorFunction":!1},e.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,Q):(r.__proto__=Q,A(r,P,"GeneratorFunction")),r.prototype=Object.create(ee),r},e.awrap=function(r){return{__await:r}};function te(r,t){function a(x,j,$,F){var I=G(r[x],r,j);if(I.type==="throw")F(I.arg);else{var we=I.arg,le=we.value;return le&&typeof le=="object"&&s.call(le,"__await")?t.resolve(le.__await).then(function(re){a("next",re,$,F)},function(re){a("throw",re,$,F)}):t.resolve(le).then(function(re){we.value=re,$(we)},function(re){return a("throw",re,$,F)})}}var _;function p(x,j){function $(){return new t(function(F,I){a(x,j,F,I)})}return _=_?_.then($,$):$()}i(this,"_invoke",{value:p})}ye(te.prototype),A(te.prototype,C,function(){return this}),e.AsyncIterator=te,e.async=function(r,t,a,_,p){p===void 0&&(p=Promise);var x=new te(B(r,t,a,_),p);return e.isGeneratorFunction(t)?x:x.next().then(function(j){return j.done?j.value:x.next()})};function Re(r,t,a){var _=V;return function(x,j){if(_===O)throw new Error("Generator is already running");if(_===Z){if(x==="throw")throw j;return H()}for(a.method=x,a.arg=j;;){var $=a.delegate;if($){var F=Pe($,a);if(F){if(F===N)continue;return F}}if(a.method==="next")a.sent=a._sent=a.arg;else if(a.method==="throw"){if(_===V)throw _=Z,a.arg;a.dispatchException(a.arg)}else a.method==="return"&&a.abrupt("return",a.arg);_=O;var I=G(r,t,a);if(I.type==="normal"){if(_=a.done?Z:k,I.arg===N)continue;return{value:I.arg,done:a.done}}else I.type==="throw"&&(_=Z,a.method="throw",a.arg=I.arg)}}}function Pe(r,t){var a=t.method,_=r.iterator[a];if(_===h)return t.delegate=null,a==="throw"&&r.iterator.return&&(t.method="return",t.arg=h,Pe(r,t),t.method==="throw")||a!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),N;var p=G(_,r.iterator,t.arg);if(p.type==="throw")return t.method="throw",t.arg=p.arg,t.delegate=null,N;var x=p.arg;if(!x)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,N;if(x.done)t[r.resultName]=x.value,t.next=r.nextLoc,t.method!=="return"&&(t.method="next",t.arg=h);else return x;return t.delegate=null,N}ye(ee),A(ee,P,"Generator"),A(ee,S,function(){return this}),A(ee,"toString",function(){return"[object Generator]"});function Te(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function K(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function W(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(Te,this),this.reset(!0)}e.keys=function(r){var t=Object(r),a=[];for(var _ in t)a.push(_);return a.reverse(),function p(){for(;a.length;){var x=a.pop();if(x in t)return p.value=x,p.done=!1,p}return p.done=!0,p}};function pe(r){if(r){var t=r[S];if(t)return t.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var a=-1,_=function p(){for(;++a<r.length;)if(s.call(r,a))return p.value=r[a],p.done=!1,p;return p.value=h,p.done=!0,p};return _.next=_}}return{next:H}}e.values=pe;function H(){return{value:h,done:!0}}return W.prototype={constructor:W,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(K),!r)for(var t in this)t.charAt(0)==="t"&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var r=this.tryEntries[0],t=r.completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function a(F,I){return x.type="throw",x.arg=r,t.next=F,I&&(t.method="next",t.arg=h),!!I}for(var _=this.tryEntries.length-1;_>=0;--_){var p=this.tryEntries[_],x=p.completion;if(p.tryLoc==="root")return a("end");if(p.tryLoc<=this.prev){var j=s.call(p,"catchLoc"),$=s.call(p,"finallyLoc");if(j&&$){if(this.prev<p.catchLoc)return a(p.catchLoc,!0);if(this.prev<p.finallyLoc)return a(p.finallyLoc)}else if(j){if(this.prev<p.catchLoc)return a(p.catchLoc,!0)}else if($){if(this.prev<p.finallyLoc)return a(p.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,t){for(var a=this.tryEntries.length-1;a>=0;--a){var _=this.tryEntries[a];if(_.tryLoc<=this.prev&&s.call(_,"finallyLoc")&&this.prev<_.finallyLoc){var p=_;break}}p&&(r==="break"||r==="continue")&&p.tryLoc<=t&&t<=p.finallyLoc&&(p=null);var x=p?p.completion:{};return x.type=r,x.arg=t,p?(this.method="next",this.next=p.finallyLoc,N):this.complete(x)},complete:function(r,t){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&t&&(this.next=t),N},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===r)return this.complete(a.completion,a.afterLoc),K(a),N}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===r){var _=a.completion;if(_.type==="throw"){var p=_.arg;K(a)}return p}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,a){return this.delegate={iterator:pe(r),resultName:t,nextLoc:a},this.method==="next"&&(this.arg=h),N}},e})(n.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}})(Qe)),Qe.exports}var Xe,qt;function Rt(){return qt||(qt=1,Xe=(n,o)=>`${n}-${o}-${Math.random().toString(16).slice(3,8)}`),Xe}var et,Ut;function sr(){if(Ut)return et;Ut=1;const n=Rt();let o=0;return et=({id:e,action:f,payload:s={}})=>{let i=e;return typeof i>"u"&&(i=n("Job",o),o+=1),{id:i,action:f,payload:s}},et}var Ne={},jt;function Lt(){if(jt)return Ne;jt=1;let n=!1;return Ne.logging=n,Ne.setLogging=o=>{n=o},Ne.log=(...o)=>n?console.log.apply(this,o):null,Ne}var tt,Ft;function ea(){if(Ft)return tt;Ft=1;const n=sr(),{log:o}=Lt(),e=Rt();let f=0;return tt=()=>{const s=e("Scheduler",f),i={},h={};let y=[];f+=1;const S=()=>y.length,C=()=>Object.keys(i).length,P=()=>{if(y.length!==0){const k=Object.keys(i);for(let O=0;O<k.length;O+=1)if(typeof h[k[O]]>"u"){y[0](i[k[O]]);break}}},A=(k,O)=>new Promise((Z,N)=>{const se=n({action:k,payload:O});y.push(async D=>{y.shift(),h[D.id]=se;try{Z(await D[k].apply(this,[...O,se.id]))}catch(Q){N(Q)}finally{delete h[D.id],P()}}),o(`[${s}]: Add ${se.id} to JobQueue`),o(`[${s}]: JobQueue length=${y.length}`),P()});return{addWorker:k=>(i[k.id]=k,o(`[${s}]: Add ${k.id}`),o(`[${s}]: Number of workers=${C()}`),P(),k.id),addJob:async(k,...O)=>{if(C()===0)throw Error(`[${s}]: You need to have at least one worker before adding jobs`);return A(k,O)},terminate:async()=>{Object.keys(i).forEach(async k=>{await i[k].terminate()}),y=[]},getQueueLen:S,getNumWorkers:C}},tt}var rt,Gt;function ta(){if(Gt)return rt;Gt=1;function n(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return rt=n,rt}var at,zt;function ra(){if(zt)return at;zt=1;const n=ta();return at=o=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":n()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Kr=="function"&&(e.type="node"),typeof o>"u"?e:e[o]},at}var nt,Bt;function aa(){if(Bt)return nt;Bt=1;const o=ra()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return nt=e=>{const f={...e};return["corePath","workerPath","langPath"].forEach(s=>{e[s]&&(f[s]=o(f[s]))}),f},nt}var ot,Wt;function na(){return Wt||(Wt=1,ot=n=>{const o=[],e=[],f=[],s=[],i=[];return n.blocks&&n.blocks.forEach(h=>{h.paragraphs.forEach(y=>{y.lines.forEach(S=>{S.words.forEach(C=>{C.symbols.forEach(P=>{i.push({...P,page:n,block:h,paragraph:y,line:S,word:C})}),s.push({...C,page:n,block:h,paragraph:y,line:S})}),f.push({...S,page:n,block:h,paragraph:y})}),e.push({...y,page:n,block:h})}),o.push({...h,page:n})}),{...n,blocks:o,paragraphs:e,lines:f,words:s,symbols:i}}),ot}var st,Ht;function ir(){return Ht||(Ht=1,st={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),st}const oa="5.1.1",sa={version:oa};var it,Yt;function ia(){return Yt||(Yt=1,it={workerBlobURL:!0,logger:()=>{}}),it}var ct,Kt;function ca(){if(Kt)return ct;Kt=1;const n=sa.version;return ct={...ia(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},ct}var lt,Jt;function la(){return Jt||(Jt=1,lt=({workerPath:n,workerBlobURL:o})=>{let e;if(Blob&&URL&&o){const f=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(f))}else e=new Worker(n);return e}),lt}var ut,Vt;function ua(){return Vt||(Vt=1,ut=n=>{n.terminate()}),ut}var dt,Zt;function da(){return Zt||(Zt=1,dt=(n,o)=>{n.onmessage=({data:e})=>{o(e)}}),dt}var ft,Qt;function fa(){return Qt||(Qt=1,ft=async(n,o)=>{n.postMessage(o)}),ft}var vt,Xt;function va(){if(Xt)return vt;Xt=1;const n=e=>new Promise((f,s)=>{const i=new FileReader;i.onload=()=>{f(i.result)},i.onerror=({target:{error:{code:h}}})=>{s(Error(`File could not be read! Code=${h}`))},i.readAsArrayBuffer(e)}),o=async e=>{let f=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?f=atob(e.split(",")[1]).split("").map(s=>s.charCodeAt(0)):f=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(f=await o(e.src)),e.tagName==="VIDEO"&&(f=await o(e.poster)),e.tagName==="CANVAS"&&await new Promise(s=>{e.toBlob(async i=>{f=await n(i),s()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const s=await e.convertToBlob();f=await n(s)}else(e instanceof File||e instanceof Blob)&&(f=await n(e));return new Uint8Array(f)};return vt=o,vt}var ht,er;function ha(){if(er)return ht;er=1;const n=ca(),o=la(),e=ua(),f=da(),s=fa(),i=va();return ht={defaultOptions:n,spawnWorker:o,terminateWorker:e,onMessage:f,send:s,loadImage:i},ht}var pt,tr;function cr(){if(tr)return pt;tr=1;const n=aa(),o=na(),e=sr(),{log:f}=Lt(),s=Rt(),i=ir(),{defaultOptions:h,spawnWorker:y,terminateWorker:S,onMessage:C,loadImage:P,send:A}=ha();let B=0;return pt=async(G="eng",V=i.LSTM_ONLY,k={},O={})=>{const Z=s("Worker",B),{logger:N,errorHandler:se,...D}=n({...h,...k}),Q={},_e={},he=typeof G=="string"?G.split("+"):G;let ce=V,ee=O;const ye=[i.DEFAULT,i.LSTM_ONLY].includes(V)&&!D.legacyCore;let te,Re;const Pe=new Promise((b,w)=>{Re=b,te=w}),Te=b=>{te(b.message)};let K=y(D);K.onerror=Te,B+=1;const W=(b,w)=>{Q[b]=w},pe=(b,w)=>{_e[b]=w},H=({id:b,action:w,payload:q})=>new Promise((Y,z)=>{f(`[${Z}]: Start ${b}, action=${w}`);const ue=`${w}-${b}`;W(ue,Y),pe(ue,z),A(K,{workerId:Z,jobId:b,action:w,payload:q})}),r=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),t=b=>H(e({id:b,action:"load",payload:{options:{lstmOnly:ye,corePath:D.corePath,logging:D.logging}}})),a=(b,w,q)=>H(e({id:q,action:"FS",payload:{method:"writeFile",args:[b,w]}})),_=(b,w)=>H(e({id:w,action:"FS",payload:{method:"readFile",args:[b,{encoding:"utf8"}]}})),p=(b,w)=>H(e({id:w,action:"FS",payload:{method:"unlink",args:[b]}})),x=(b,w,q)=>H(e({id:q,action:"FS",payload:{method:b,args:w}})),j=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),$=(b,w)=>H(e({id:w,action:"loadLanguage",payload:{langs:b,options:{langPath:D.langPath,dataPath:D.dataPath,cachePath:D.cachePath,cacheMethod:D.cacheMethod,gzip:D.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(ce)&&!D.legacyLang}}})),F=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),I=(b,w,q,Y)=>H(e({id:Y,action:"initialize",payload:{langs:b,oem:w,config:q}})),we=(b="eng",w,q,Y)=>{if(ye&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(w))throw Error("Legacy model requested but code missing.");const z=w||ce;ce=z;const ue=q||ee;ee=ue;const u=(typeof b=="string"?b.split("+"):b).filter(d=>!he.includes(d));return he.push(...u),u.length>0?$(u,Y).then(()=>I(b,z,ue,Y)):I(b,z,ue,Y)},le=(b={},w)=>H(e({id:w,action:"setParameters",payload:{params:b}})),re=async(b,w={},q={blocks:!0,text:!0,hocr:!0,tsv:!0},Y)=>H(e({id:Y,action:"recognize",payload:{image:await P(b),options:w,output:q}})),ze=(b="Tesseract OCR Result",w=!1,q)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),H(e({id:q,action:"getPDF",payload:{title:b,textonly:w}}))),Ue=async(b,w)=>{if(ye)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return H(e({id:w,action:"detect",payload:{image:await P(b)}}))},je=async()=>(K!==null&&(S(K),K=null),Promise.resolve());C(K,({workerId:b,jobId:w,status:q,action:Y,data:z})=>{const ue=`${Y}-${w}`;if(q==="resolve"){f(`[${b}]: Complete ${w}`);let l=z;Y==="recognize"?l=o(z):Y==="getPDF"&&(l=Array.from({...z,length:Object.keys(z).length})),Q[ue]({jobId:w,data:l})}else if(q==="reject")if(_e[ue](z),Y==="load"&&te(z),se)se(z);else throw Error(z);else q==="progress"&&N({...z,userJobId:w})});const Be={id:Z,worker:K,setResolve:W,setReject:pe,load:r,writeText:a,readText:_,removeFile:p,FS:x,loadLanguage:j,initialize:F,reinitialize:we,setParameters:le,recognize:re,getPDF:ze,detect:Ue,terminate:je};return t().then(()=>$(G)).then(()=>I(G,V,O)).then(()=>Re(Be)).catch(()=>{}),Pe},pt}var gt,rr;function pa(){if(rr)return gt;rr=1;const n=cr();return gt={recognize:async(f,s,i)=>{const h=await n(s,1,i);return h.recognize(f).finally(async()=>{await h.terminate()})},detect:async(f,s)=>{const i=await n("osd",0,s);return i.detect(f).finally(async()=>{await i.terminate()})}},gt}var mt,ar;function ga(){return ar||(ar=1,mt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),mt}var bt,nr;function ma(){return nr||(nr=1,bt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),bt}var _t,or;function ba(){if(or)return _t;or=1,Xr();const n=ea(),o=cr(),e=pa(),f=ga(),s=ir(),i=ma(),{setLogging:h}=Lt();return _t={languages:f,OEM:s,PSM:i,createScheduler:n,createWorker:o,setLogging:h,...e},_t}var _a=ba();const ya=qr(_a);typeof window<"u"&&(Ur.workerSrc=`${Jr}/pdf.worker.min.mjs`);const wa=[{value:"eng",label:"English",native:"English"},{value:"spa",label:"Spanish",native:"Español"},{value:"fra",label:"French",native:"Français"},{value:"deu",label:"German",native:"Deutsch"},{value:"ita",label:"Italian",native:"Italiano"},{value:"por",label:"Portuguese",native:"Português"},{value:"nld",label:"Dutch",native:"Nederlands"},{value:"pol",label:"Polish",native:"Polski"},{value:"rus",label:"Russian",native:"Русский"},{value:"jpn",label:"Japanese",native:"日本語"},{value:"chi_sim",label:"Chinese (Simplified)",native:"简体中文"},{value:"chi_tra",label:"Chinese (Traditional)",native:"繁體中文"},{value:"kor",label:"Korean",native:"한국어"},{value:"ara",label:"Arabic",native:"العربية"},{value:"hin",label:"Hindi",native:"हिन्दी"}],xa=[{value:"searchable-pdf",label:"Searchable PDF",desc:"Add invisible text layer to PDF"},{value:"text-only",label:"Text Only",desc:"Extract text as .txt file"},{value:"text-and-pdf",label:"Both",desc:"Get searchable PDF and text file"}];let qe=null;async function ka(n){return qe&&await qe.terminate(),qe=await ya.createWorker(n,1,{logger:o=>{o.status}}),qe}async function Ra(n,o,e=2){const f=await n.getPage(o),s=f.getViewport({scale:e}),i=document.createElement("canvas");i.width=s.width,i.height=s.height;const h=i.getContext("2d",{willReadFrequently:!0});return await f.render({canvasContext:h,viewport:s}).promise,{imageData:h.getImageData(0,0,i.width,i.height),width:s.width,height:s.height}}async function La(n,o){const e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").putImageData(o,0,0);const s=await n.recognize(e),i=s.data.words.map(h=>({text:h.text,bbox:h.bbox,confidence:h.confidence}));return{text:s.data.text,confidence:s.data.confidence,words:i}}async function Sa(n,o,e=2){const f=await Fr.load(n),s=f.getPages(),i=await f.embedFont(Gr.Helvetica);for(let y=0;y<s.length&&y<o.length;y++){const S=s[y],C=o[y],{width:P,height:A}=S.getSize();for(const B of C.words){const G=B.bbox.x0/e,V=A-B.bbox.y1/e,k=(B.bbox.y1-B.bbox.y0)/e,O=Math.max(4,Math.min(k*.8,20));S.drawText(B.text,{x:G,y:V,size:O,font:i,color:zr(0,0,0),opacity:.01})}}const h=await f.save();return new Blob([h],{type:"application/pdf"})}async function Oa(n,o){const e=performance.now(),{language:f,outputMode:s,onProgress:i}=o;i?.(2,"Initializing OCR engine...");const h=await ka(f);i?.(5,"Loading PDF...");const y=await n.arrayBuffer(),S=await jr({data:y}).promise,C=S.numPages;i?.(10,`Processing ${C} page(s)...`);const P=[],A=2;for(let k=1;k<=C;k++){const O=10+(k-1)/C*70;i?.(O,`OCR page ${k}/${C}...`);const{imageData:Z}=await Ra(S,k,A),N=await La(h,Z);P.push(N)}i?.(80,"Generating output...");const B=P.map((k,O)=>`--- Page ${O+1} ---
${k.text}`).join(`

`),G=P.reduce((k,O)=>k+O.confidence,0)/P.length;let V;return(s==="searchable-pdf"||s==="text-and-pdf")&&(i?.(85,"Creating searchable PDF..."),V=await Sa(y,P,A)),i?.(95,"Cleaning up..."),await h.terminate(),qe=null,i?.(100,"Complete!"),{searchablePdf:V,text:B,confidence:G,pageCount:C,processingTimeMs:Math.round(performance.now()-e)}}function Ea(n){const o=n*5,e=n*15;if(e<60)return`${o}-${e} seconds`;{const f=Math.ceil(o/60),s=Math.ceil(e/60);return`${f}-${s} minutes`}}var Pa=U('<div class="text-center"><div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-sky-500/10"><!></div> <h3 class="text-lg font-semibold text-surface-100 mb-1">Drop your scanned PDFs here</h3> <p class="text-sm text-surface-500 mb-4">or click to browse files</p> <div class="inline-flex items-center gap-2 rounded-full bg-surface-800 px-3 py-1 text-xs text-surface-400"><!> PDF files only</div></div>'),Ta=U('<div class="flex items-center gap-2 text-sm text-surface-400"><!> <span>Drop more files or click to add</span></div>'),Ca=U('<img alt="" class="w-full h-full object-cover"/>'),Aa=U('<div class="w-full h-full flex items-center justify-center"><!></div>'),Da=U("<span> </span>"),$a=U('<p class="text-xs text-surface-500 mt-1"> </p>'),Ia=U('<div class="mt-2"><div class="h-1.5 bg-surface-700 rounded-full overflow-hidden"><div class="h-full bg-gradient-to-r from-sky-400 to-cyan-500 transition-all duration-300"></div></div> <!></div>'),Ma=U('<div class="mt-2 flex items-center gap-4 text-xs"><span class="flex items-center gap-1 text-green-400"><!> </span> <span class="text-surface-500"> </span></div>'),Na=U('<p class="text-xs text-red-400 mt-2 flex items-center gap-1"><!> </p>'),qa=U('<button class="p-2 text-green-400 hover:text-green-300 transition-colors" title="Download Searchable PDF"><!></button>'),Ua=U('<!> <button class="p-2 text-sky-400 hover:text-sky-300 transition-colors" title="Download Text"><!></button>',1),ja=U('<div class="glass rounded-xl p-4 flex items-start gap-4"><div class="h-16 w-12 flex-shrink-0 rounded-lg bg-surface-800 overflow-hidden"><!></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-surface-200 truncate"> </p> <div class="flex items-center gap-3 text-xs text-surface-500 mt-1"><span> </span> <!></div> <!></div> <div class="flex items-center gap-1"><!> <button class="p-2 text-surface-500 hover:text-red-400 transition-colors" title="Remove"><!></button></div></div>'),Fa=U('<div class="mt-4 space-y-3"></div>'),Ga=U("<option> </option>"),za=U('<button><div class="flex-1 text-left"><p class="text-sm font-medium text-surface-200"> </p> <p class="text-xs text-surface-500"> </p></div> <!></button>'),Ba=U('<div class="mb-6 p-3 rounded-xl bg-surface-800/50 border border-surface-700"><div class="flex items-center gap-2 text-sm"><!> <span class="text-surface-300">Estimated time:</span> <span class="text-sky-400 font-medium"> </span></div> <p class="text-xs text-surface-500 mt-1"> </p></div>'),Wa=U("<!> Processing...",1),Ha=U("<!> ",1),Ya=U('<div class="flex min-h-screen flex-col bg-surface-950 text-surface-200"><!> <div class="fixed inset-0 -z-10 overflow-hidden"><div class="absolute -top-1/2 -right-1/4 h-[800px] w-[800px] rounded-full bg-gradient-to-br from-sky-500/10 to-cyan-500/10 blur-3xl"></div> <div class="absolute -bottom-1/2 -left-1/4 h-[600px] w-[600px] rounded-full bg-gradient-to-tr from-cyan-500/10 to-sky-500/10 blur-3xl"></div></div> <main class="flex-1 px-4 sm:px-6 lg:px-8 pt-28 pb-12"><div class="mx-auto max-w-5xl"><div class="text-center mb-8"><div class="inline-flex items-center gap-2 rounded-full bg-sky-500/10 px-4 py-1.5 text-sm font-medium text-sky-400 mb-4"><!> OCR - Text Recognition</div> <h1 class="text-3xl font-bold text-surface-100">Extract <span class="text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-cyan-400">searchable text</span> from scanned PDFs</h1> <p class="mt-2 text-surface-500">Use AI-powered OCR to make scanned documents searchable and selectable</p></div> <div class="grid gap-6 lg:grid-cols-2"><div><div role="button" tabindex="0"><input type="file" accept=".pdf,application/pdf" multiple class="hidden"/> <!></div> <!></div> <div class="glass rounded-2xl p-6"><h3 class="flex items-center gap-2 text-lg font-semibold text-surface-100 mb-6"><!> OCR Settings</h3> <div class="mb-6"><label class="flex items-center gap-2 text-sm font-medium text-surface-300 mb-3"><!> Document Language</label> <select class="w-full rounded-xl bg-surface-800 border border-surface-700 px-4 py-3 text-surface-100 focus:border-sky-500 focus:ring-1 focus:ring-sky-500 focus:outline-none"></select></div> <div class="mb-6"><label class="flex items-center gap-2 text-sm font-medium text-surface-300 mb-3"><!> Output Format</label> <div class="space-y-2"></div></div> <!> <div class="mb-6 p-3 rounded-xl bg-surface-800/50 border border-surface-700"><p class="text-sm text-surface-400"><strong class="text-surface-300">How it works:</strong> OCR (Optical Character Recognition) scans your PDF images and extracts text, making them searchable and copyable. All processing happens locally in your browser.</p></div> <button class="w-full flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-sky-500 to-cyan-500 px-6 py-3 text-base font-semibold text-white shadow-lg shadow-sky-500/30 transition-all hover:shadow-xl hover:shadow-sky-500/40 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div></div></main> <!></div> <!>',1);function ln(n,o){wr(o,!0);let e=Me(xr([])),f=Me(!1),s=Me("eng"),i=Me("searchable-pdf"),h,y=Me(!1);const S=Fe(()=>c(e).length>0),C=Fe(()=>c(e).filter(l=>l.status==="completed").length),P=Fe(()=>c(e).reduce((l,u)=>l+(u.pageCount||1),0)),A=Fe(()=>Ea(c(P)));function B(){return`pdf-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async function G(l){const u=l.filter(v=>v.type==="application/pdf"||v.name.endsWith(".pdf"));if(u.length===0){Ze.error("Please select PDF files");return}const d=[];for(const v of u){const T={id:B(),file:v,originalUrl:URL.createObjectURL(v),status:"pending",progress:0};try{T.thumbnail=await Br(v),T.pageCount=await Wr(v)}catch(J){console.warn("Failed to get PDF metadata:",J)}d.push(T)}ne(e,[...c(e),...d],!0),Ze.success(`Added ${u.length} PDF(s)`)}function V(l){const u=c(e).find(d=>d.id===l);u&&URL.revokeObjectURL(u.originalUrl),ne(e,c(e).filter(d=>d.id!==l),!0)}async function k(){if(c(e).length===0)return;ne(f,!0);const l=c(e).filter(u=>u.status==="pending"||u.status==="error");for(const u of l){ne(e,c(e).map(d=>d.id===u.id?{...d,status:"processing",progress:0,progressStage:"Initializing..."}:d),!0);try{const d=await Oa(u.file,{language:c(s),outputMode:c(i),onProgress:(v,T)=>{ne(e,c(e).map(J=>J.id===u.id?{...J,progress:v,progressStage:T}:J),!0)}});ne(e,c(e).map(v=>v.id===u.id?{...v,status:"completed",progress:100,ocrResult:d,progressStage:`Done in ${(d.processingTimeMs/1e3).toFixed(1)}s (${d.confidence.toFixed(0)}% confidence)`}:v),!0)}catch(d){console.error("OCR error:",d),ne(e,c(e).map(v=>v.id===u.id?{...v,status:"error",error:d instanceof Error?d.message:"OCR failed"}:v),!0)}}ne(f,!1),c(C)>0&&Ze.success(`Processed ${c(C)} PDF(s) with OCR`)}function O(l){if(!l.ocrResult?.searchablePdf)return;const u=URL.createObjectURL(l.ocrResult.searchablePdf),d=document.createElement("a");d.href=u,d.download=l.file.name.replace(".pdf","-searchable.pdf"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)}function Z(l){if(!l.ocrResult?.text)return;const u=new Blob([l.ocrResult.text],{type:"text/plain"}),d=URL.createObjectURL(u),v=document.createElement("a");v.href=d,v.download=l.file.name.replace(".pdf","-text.txt"),document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(d)}function N(l){l.preventDefault(),ne(y,!0)}function se(l){l.preventDefault(),ne(y,!1)}function D(l){l.preventDefault(),ne(y,!1);const u=Array.from(l.dataTransfer?.files||[]);G(u)}function Q(l){const u=l.target,d=Array.from(u.files||[]);G(d),u.value=""}var _e=Ya();Dr("1hpxemn",l=>{Rr(()=>{Lr.title="OCR - Extract Text from PDFs - Smash"})});var he=be(_e),ce=m(he);Sr(ce,{});var ee=R(ce,4),ye=m(ee),te=m(ye),Re=m(te),Pe=m(Re);$t(Pe,{class:"h-4 w-4"}),ke(),g(Re),ke(4),g(te);var Te=R(te,2),K=m(Te),W=m(K);W.__click=()=>h?.click(),W.__keydown=l=>l.key==="Enter"&&h?.click();var pe=m(W);pe.__change=Q,Nr(pe,l=>h=l,()=>h);var H=R(pe,2);{var r=l=>{var u=Pa(),d=m(u),v=m(d);At(v,{class:"h-8 w-8 text-sky-400"}),g(d);var T=R(d,6),J=m(T);Tt(J,{class:"h-3 w-3"}),ke(),g(T),g(u),E(l,u)},t=l=>{var u=Ta(),d=m(u);At(d,{class:"h-4 w-4"}),ke(2),g(u),E(l,u)};X(H,l=>{c(S)?l(t,!1):l(r)})}g(W);var a=R(W,2);{var _=l=>{var u=Fa();Ve(u,21,()=>c(e),d=>d.id,(d,v)=>{var T=ja(),J=m(T),Le=m(J);{var Ae=L=>{var M=Ca();ie(()=>Ir(M,"src",c(v).thumbnail)),E(L,M)},We=L=>{var M=Aa(),de=m(M);Tt(de,{class:"h-6 w-6 text-surface-600"}),g(M),E(L,M)};X(Le,L=>{c(v).thumbnail?L(Ae):L(We,!1)})}g(J);var De=R(J,2),Se=m(De),lr=m(Se,!0);g(Se);var He=R(Se,2),Ye=m(He),ur=m(Ye,!0);g(Ye);var dr=R(Ye,2);{var fr=L=>{var M=Da(),de=m(M);g(M),ie(()=>oe(de,`• ${c(v).pageCount??""} page${c(v).pageCount!==1?"s":""}`)),E(L,M)};X(dr,L=>{c(v).pageCount&&L(fr)})}g(He);var vr=R(He,2);{var hr=L=>{var M=Ia(),de=m(M),$e=m(de);g(de);var Oe=R(de,2);{var fe=ae=>{var ve=$a(),ge=m(ve,!0);g(ve),ie(()=>oe(ge,c(v).progressStage)),E(ae,ve)};X(Oe,ae=>{c(v).progressStage&&ae(fe)})}g(M),ie(()=>Mr($e,`width: ${c(v).progress??""}%`)),E(L,M)},pr=L=>{var M=Ce(),de=be(M);{var $e=fe=>{var ae=Ma(),ve=m(ae),ge=m(ve);It(ge,{class:"h-3 w-3"});var Ee=R(ge);g(ve);var me=R(ve,2),xe=m(me);g(me),g(ae),ie((Ie,_r)=>{oe(Ee,` ${Ie??""}% confidence`),oe(xe,`${_r??""}s`)},[()=>c(v).ocrResult.confidence.toFixed(0),()=>(c(v).ocrResult.processingTimeMs/1e3).toFixed(1)]),E(fe,ae)},Oe=fe=>{var ae=Ce(),ve=be(ae);{var ge=Ee=>{var me=Na(),xe=m(me);Ar(xe,{class:"h-3 w-3"});var Ie=R(xe);g(me),ie(()=>oe(Ie,` ${c(v).error??""}`)),E(Ee,me)};X(ve,Ee=>{c(v).status==="error"&&Ee(ge)},!0)}E(fe,ae)};X(de,fe=>{c(v).status==="completed"&&c(v).ocrResult?fe($e):fe(Oe,!1)},!0)}E(L,M)};X(vr,L=>{c(v).status==="processing"?L(hr):L(pr,!1)})}g(De);var St=R(De,2),Ot=m(St);{var gr=L=>{Dt(L,{class:"h-5 w-5 text-sky-400 animate-spin"})},mr=L=>{var M=Ce(),de=be(M);{var $e=Oe=>{var fe=Ua(),ae=be(fe);{var ve=me=>{var xe=qa();xe.__click=()=>O(c(v));var Ie=m(xe);Yr(Ie,{class:"h-4 w-4"}),g(xe),E(me,xe)};X(ae,me=>{c(v).ocrResult.searchablePdf&&me(ve)})}var ge=R(ae,2);ge.__click=()=>Z(c(v));var Ee=m(ge);Mt(Ee,{class:"h-4 w-4"}),g(ge),E(Oe,fe)};X(de,Oe=>{c(v).status==="completed"&&c(v).ocrResult&&Oe($e)},!0)}E(L,M)};X(Ot,L=>{c(v).status==="processing"?L(gr):L(mr,!1)})}var Ke=R(Ot,2);Ke.__click=()=>V(c(v).id);var br=m(Ke);Tr(br,{class:"h-4 w-4"}),g(Ke),g(St),g(T),ie(L=>{oe(lr,c(v).file.name),oe(ur,L)},[()=>Hr(c(v).file.size)]),Ge(1,T,()=>Cr,()=>({duration:200})),E(d,T)}),g(u),Ge(1,u,()=>Pt,()=>({y:20,duration:200})),E(l,u)};X(a,l=>{c(S)&&l(_)})}g(K);var p=R(K,2),x=m(p),j=m(x);Vr(j,{class:"h-5 w-5 text-sky-400"}),ke(),g(x);var $=R(x,2),F=m($),I=m(F);Qr(I,{class:"h-4 w-4 text-sky-400"}),ke(),g(F);var we=R(F,2);Ve(we,21,()=>wa,Et,(l,u)=>{var d=Ga(),v=m(d);g(d);var T={};ie(()=>{oe(v,`${c(u).label??""} (${c(u).native??""})`),T!==(T=c(u).value)&&(d.value=(d.__value=c(u).value)??"")}),E(l,d)}),g(we),g($);var le=R($,2),re=m(le),ze=m(re);Mt(ze,{class:"h-4 w-4 text-sky-400"}),ke(),g(re);var Ue=R(re,2);Ve(Ue,21,()=>xa,Et,(l,u)=>{var d=za();d.__click=()=>ne(i,c(u).value,!0);var v=m(d),T=m(v),J=m(T,!0);g(T);var Le=R(T,2),Ae=m(Le,!0);g(Le),g(v);var We=R(v,2);{var De=Se=>{It(Se,{class:"h-5 w-5 text-sky-400 flex-shrink-0"})};X(We,Se=>{c(i)===c(u).value&&Se(De)})}g(d),ie(()=>{Ct(d,1,`w-full flex items-start gap-3 p-3 rounded-xl transition-all ${c(i)===c(u).value?"bg-sky-500/20 border border-sky-500/50":"bg-surface-800 hover:bg-surface-700"}`),oe(J,c(u).label),oe(Ae,c(u).desc)}),E(l,d)}),g(Ue),g(le);var je=R(le,2);{var Be=l=>{var u=Ba(),d=m(u),v=m(d);Zr(v,{class:"h-4 w-4 text-sky-400"});var T=R(v,4),J=m(T,!0);g(T),g(d);var Le=R(d,2),Ae=m(Le);g(Le),g(u),ie(()=>{oe(J,c(A)),oe(Ae,`Processing ${c(P)??""} page${c(P)!==1?"s":""} with Tesseract OCR`)}),E(l,u)};X(je,l=>{c(S)&&l(Be)})}var b=R(je,4);b.__click=k;var w=m(b);{var q=l=>{var u=Wa(),d=be(u);Dt(d,{class:"h-5 w-5 animate-spin"}),ke(),E(l,u)},Y=l=>{var u=Ha(),d=be(u);$t(d,{class:"h-5 w-5"});var v=R(d);ie(()=>oe(v,` Run OCR on ${c(e).length??""} PDF${c(e).length!==1?"s":""}`)),E(l,u)};X(w,l=>{c(f)?l(q):l(Y,!1)})}g(b),g(p),g(Te),g(ye),g(ee);var z=R(ee,2);Or(z),g(he);var ue=R(he,2);Er(ue,{}),ie(()=>{Ct(W,1,`relative rounded-2xl border-2 border-dashed transition-all duration-200 ${c(y)?"border-sky-400 bg-sky-500/10":"border-surface-700 bg-surface-900/50 hover:border-surface-600"} ${c(S)?"p-4":"p-8"}`),b.disabled=!c(S)||c(f)}),Ge(1,te,()=>Pr,()=>({duration:200})),Je("dragover",W,N),Je("dragleave",W,se),Je("drop",W,D),$r(we,()=>c(s),l=>ne(s,l)),Ge(1,p,()=>Pt,()=>({y:20,delay:100,duration:200})),E(n,_e),kr()}yr(["click","keydown","change"]);export{ln as component};
