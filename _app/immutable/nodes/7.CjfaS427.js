import{c as Ce,a as O,d as yr,f as U,e as Je}from"../chunks/epw77fHu.js";import{f as be,p as wr,a as Me,h as xr,d as m,s as k,t as ie,g as c,b as kr,c as oe,u as Fe,e as Rr,$ as Lr,n as ke,r as g}from"../chunks/BpOpjC-t.js";import{s as se}from"../chunks/Cg0V7AnH.js";import{l as yt,s as wt,i as X}from"../chunks/BABAOADx.js";import{I as xt,s as kt,H as Sr,e as Ve,F as Or,t as Ge,i as Et,f as Er,a as Pt,b as Tt,T as Pr,d as Tr}from"../chunks/BHkP4B4H.js";import{h as Cr,d as Ar,s as Ct,a as Dr,b as $r}from"../chunks/CMkUouna.js";import{b as Ir}from"../chunks/CigC9Rhd.js";import{n as Mr,_ as Nr,e as qr,P as Ur,S as jr,q as Fr,T as Gr,t as Ze,g as zr,a as Br,U as At,f as Wr,L as Dt,C as Hr,D as Yr}from"../chunks/DZZW7bhQ.js";import{c as Kr}from"../chunks/TDtrdbi3.js";import{b as Jr}from"../chunks/7Qnq5RmD.js";import{F as $t}from"../chunks/DxYhz8M_.js";import{S as Vr}from"../chunks/BLm3XsFj.js";import"../chunks/Mxry85zB.js";import{C as It}from"../chunks/JnBifY74.js";function Zr(n,o){const e=yt(o,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];xt(n,wt({name:"clock"},()=>e,{get iconNode(){return f},children:(s,i)=>{var h=Ce(),y=be(h);kt(y,o,"default",{}),O(s,h)},$$slots:{default:!0}}))}function Mt(n,o){const e=yt(o,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"m5 11-3 3"}],["path",{d:"m5 17-3-3h10"}]];xt(n,wt({name:"file-output"},()=>e,{get iconNode(){return f},children:(s,i)=>{var h=Ce(),y=be(h);kt(y,o,"default",{}),O(s,h)},$$slots:{default:!0}}))}function Qr(n,o){const e=yt(o,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];xt(n,wt({name:"languages"},()=>e,{get iconNode(){return f},children:(s,i)=>{var h=Ce(),y=be(h);kt(y,o,"default",{}),O(s,h)},$$slots:{default:!0}}))}var Qe={exports:{}},Nt;function Xr(){return Nt||(Nt=1,(function(n){var o=(function(e){var f=Object.prototype,s=f.hasOwnProperty,i=Object.defineProperty||function(r,t,a){r[t]=a.value},h,y=typeof Symbol=="function"?Symbol:{},E=y.iterator||"@@iterator",M=y.asyncIterator||"@@asyncIterator",T=y.toStringTag||"@@toStringTag";function P(r,t,a){return Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{P({},"")}catch{P=function(t,a,_){return t[a]=_}}function z(r,t,a,_){var p=t&&t.prototype instanceof Z?t:Z,x=Object.create(p.prototype),F=new H(_||[]);return i(x,"_invoke",{value:Re(r,a,F)}),x}e.wrap=z;function B(r,t,a){try{return{type:"normal",arg:r.call(t,a)}}catch(_){return{type:"throw",arg:_}}}var ee="suspendedStart",L="suspendedYield",R="executing",j="completed",N={};function Z(){}function A(){}function Q(){}var _e={};P(_e,E,function(){return this});var he=Object.getPrototypeOf,ce=he&&he(he(pe([])));ce&&ce!==f&&s.call(ce,E)&&(_e=ce);var te=Q.prototype=Z.prototype=Object.create(_e);A.prototype=Q,i(te,"constructor",{value:Q,configurable:!0}),i(Q,"constructor",{value:A,configurable:!0}),A.displayName=P(Q,T,"GeneratorFunction");function ye(r){["next","throw","return"].forEach(function(t){P(r,t,function(a){return this._invoke(t,a)})})}e.isGeneratorFunction=function(r){var t=typeof r=="function"&&r.constructor;return t?t===A||(t.displayName||t.name)==="GeneratorFunction":!1},e.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,Q):(r.__proto__=Q,P(r,T,"GeneratorFunction")),r.prototype=Object.create(te),r},e.awrap=function(r){return{__await:r}};function re(r,t){function a(x,F,D,G){var $=B(r[x],r,F);if($.type==="throw")G($.arg);else{var we=$.arg,le=we.value;return le&&typeof le=="object"&&s.call(le,"__await")?t.resolve(le.__await).then(function(ae){a("next",ae,D,G)},function(ae){a("throw",ae,D,G)}):t.resolve(le).then(function(ae){we.value=ae,D(we)},function(ae){return a("throw",ae,D,G)})}}var _;function p(x,F){function D(){return new t(function(G,$){a(x,F,G,$)})}return _=_?_.then(D,D):D()}i(this,"_invoke",{value:p})}ye(re.prototype),P(re.prototype,M,function(){return this}),e.AsyncIterator=re,e.async=function(r,t,a,_,p){p===void 0&&(p=Promise);var x=new re(z(r,t,a,_),p);return e.isGeneratorFunction(t)?x:x.next().then(function(F){return F.done?F.value:x.next()})};function Re(r,t,a){var _=ee;return function(x,F){if(_===R)throw new Error("Generator is already running");if(_===j){if(x==="throw")throw F;return Y()}for(a.method=x,a.arg=F;;){var D=a.delegate;if(D){var G=Pe(D,a);if(G){if(G===N)continue;return G}}if(a.method==="next")a.sent=a._sent=a.arg;else if(a.method==="throw"){if(_===ee)throw _=j,a.arg;a.dispatchException(a.arg)}else a.method==="return"&&a.abrupt("return",a.arg);_=R;var $=B(r,t,a);if($.type==="normal"){if(_=a.done?j:L,$.arg===N)continue;return{value:$.arg,done:a.done}}else $.type==="throw"&&(_=j,a.method="throw",a.arg=$.arg)}}}function Pe(r,t){var a=t.method,_=r.iterator[a];if(_===h)return t.delegate=null,a==="throw"&&r.iterator.return&&(t.method="return",t.arg=h,Pe(r,t),t.method==="throw")||a!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),N;var p=B(_,r.iterator,t.arg);if(p.type==="throw")return t.method="throw",t.arg=p.arg,t.delegate=null,N;var x=p.arg;if(!x)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,N;if(x.done)t[r.resultName]=x.value,t.next=r.nextLoc,t.method!=="return"&&(t.method="next",t.arg=h);else return x;return t.delegate=null,N}ye(te),P(te,T,"Generator"),P(te,E,function(){return this}),P(te,"toString",function(){return"[object Generator]"});function Te(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function J(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function H(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(Te,this),this.reset(!0)}e.keys=function(r){var t=Object(r),a=[];for(var _ in t)a.push(_);return a.reverse(),function p(){for(;a.length;){var x=a.pop();if(x in t)return p.value=x,p.done=!1,p}return p.done=!0,p}};function pe(r){if(r){var t=r[E];if(t)return t.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var a=-1,_=function p(){for(;++a<r.length;)if(s.call(r,a))return p.value=r[a],p.done=!1,p;return p.value=h,p.done=!0,p};return _.next=_}}return{next:Y}}e.values=pe;function Y(){return{value:h,done:!0}}return H.prototype={constructor:H,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(J),!r)for(var t in this)t.charAt(0)==="t"&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var r=this.tryEntries[0],t=r.completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function a(G,$){return x.type="throw",x.arg=r,t.next=G,$&&(t.method="next",t.arg=h),!!$}for(var _=this.tryEntries.length-1;_>=0;--_){var p=this.tryEntries[_],x=p.completion;if(p.tryLoc==="root")return a("end");if(p.tryLoc<=this.prev){var F=s.call(p,"catchLoc"),D=s.call(p,"finallyLoc");if(F&&D){if(this.prev<p.catchLoc)return a(p.catchLoc,!0);if(this.prev<p.finallyLoc)return a(p.finallyLoc)}else if(F){if(this.prev<p.catchLoc)return a(p.catchLoc,!0)}else if(D){if(this.prev<p.finallyLoc)return a(p.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,t){for(var a=this.tryEntries.length-1;a>=0;--a){var _=this.tryEntries[a];if(_.tryLoc<=this.prev&&s.call(_,"finallyLoc")&&this.prev<_.finallyLoc){var p=_;break}}p&&(r==="break"||r==="continue")&&p.tryLoc<=t&&t<=p.finallyLoc&&(p=null);var x=p?p.completion:{};return x.type=r,x.arg=t,p?(this.method="next",this.next=p.finallyLoc,N):this.complete(x)},complete:function(r,t){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&t&&(this.next=t),N},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===r)return this.complete(a.completion,a.afterLoc),J(a),N}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===r){var _=a.completion;if(_.type==="throw"){var p=_.arg;J(a)}return p}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,a){return this.delegate={iterator:pe(r),resultName:t,nextLoc:a},this.method==="next"&&(this.arg=h),N}},e})(n.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}})(Qe)),Qe.exports}var Xe,qt;function Rt(){return qt||(qt=1,Xe=(n,o)=>`${n}-${o}-${Math.random().toString(16).slice(3,8)}`),Xe}var et,Ut;function sr(){if(Ut)return et;Ut=1;const n=Rt();let o=0;return et=({id:e,action:f,payload:s={}})=>{let i=e;return typeof i>"u"&&(i=n("Job",o),o+=1),{id:i,action:f,payload:s}},et}var Ne={},jt;function Lt(){if(jt)return Ne;jt=1;let n=!1;return Ne.logging=n,Ne.setLogging=o=>{n=o},Ne.log=(...o)=>n?console.log.apply(this,o):null,Ne}var tt,Ft;function ea(){if(Ft)return tt;Ft=1;const n=sr(),{log:o}=Lt(),e=Rt();let f=0;return tt=()=>{const s=e("Scheduler",f),i={},h={};let y=[];f+=1;const E=()=>y.length,M=()=>Object.keys(i).length,T=()=>{if(y.length!==0){const L=Object.keys(i);for(let R=0;R<L.length;R+=1)if(typeof h[L[R]]>"u"){y[0](i[L[R]]);break}}},P=(L,R)=>new Promise((j,N)=>{const Z=n({action:L,payload:R});y.push(async A=>{y.shift(),h[A.id]=Z;try{j(await A[L].apply(this,[...R,Z.id]))}catch(Q){N(Q)}finally{delete h[A.id],T()}}),o(`[${s}]: Add ${Z.id} to JobQueue`),o(`[${s}]: JobQueue length=${y.length}`),T()});return{addWorker:L=>(i[L.id]=L,o(`[${s}]: Add ${L.id}`),o(`[${s}]: Number of workers=${M()}`),T(),L.id),addJob:async(L,...R)=>{if(M()===0)throw Error(`[${s}]: You need to have at least one worker before adding jobs`);return P(L,R)},terminate:async()=>{Object.keys(i).forEach(async L=>{await i[L].terminate()}),y=[]},getQueueLen:E,getNumWorkers:M}},tt}var rt,Gt;function ta(){if(Gt)return rt;Gt=1;function n(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return rt=n,rt}var at,zt;function ra(){if(zt)return at;zt=1;const n=ta();return at=o=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":n()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Kr=="function"&&(e.type="node"),typeof o>"u"?e:e[o]},at}var nt,Bt;function aa(){if(Bt)return nt;Bt=1;const o=ra()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return nt=e=>{const f={...e};return["corePath","workerPath","langPath"].forEach(s=>{e[s]&&(f[s]=o(f[s]))}),f},nt}var ot,Wt;function na(){return Wt||(Wt=1,ot=n=>{const o=[],e=[],f=[],s=[],i=[];return n.blocks&&n.blocks.forEach(h=>{h.paragraphs.forEach(y=>{y.lines.forEach(E=>{E.words.forEach(M=>{M.symbols.forEach(T=>{i.push({...T,page:n,block:h,paragraph:y,line:E,word:M})}),s.push({...M,page:n,block:h,paragraph:y,line:E})}),f.push({...E,page:n,block:h,paragraph:y})}),e.push({...y,page:n,block:h})}),o.push({...h,page:n})}),{...n,blocks:o,paragraphs:e,lines:f,words:s,symbols:i}}),ot}var st,Ht;function ir(){return Ht||(Ht=1,st={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),st}const oa="5.1.1",sa={version:oa};var it,Yt;function ia(){return Yt||(Yt=1,it={workerBlobURL:!0,logger:()=>{}}),it}var ct,Kt;function ca(){if(Kt)return ct;Kt=1;const n=sa.version;return ct={...ia(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},ct}var lt,Jt;function la(){return Jt||(Jt=1,lt=({workerPath:n,workerBlobURL:o})=>{let e;if(Blob&&URL&&o){const f=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(f))}else e=new Worker(n);return e}),lt}var ut,Vt;function ua(){return Vt||(Vt=1,ut=n=>{n.terminate()}),ut}var dt,Zt;function da(){return Zt||(Zt=1,dt=(n,o)=>{n.onmessage=({data:e})=>{o(e)}}),dt}var ft,Qt;function fa(){return Qt||(Qt=1,ft=async(n,o)=>{n.postMessage(o)}),ft}var vt,Xt;function va(){if(Xt)return vt;Xt=1;const n=e=>new Promise((f,s)=>{const i=new FileReader;i.onload=()=>{f(i.result)},i.onerror=({target:{error:{code:h}}})=>{s(Error(`File could not be read! Code=${h}`))},i.readAsArrayBuffer(e)}),o=async e=>{let f=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?f=atob(e.split(",")[1]).split("").map(s=>s.charCodeAt(0)):f=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(f=await o(e.src)),e.tagName==="VIDEO"&&(f=await o(e.poster)),e.tagName==="CANVAS"&&await new Promise(s=>{e.toBlob(async i=>{f=await n(i),s()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const s=await e.convertToBlob();f=await n(s)}else(e instanceof File||e instanceof Blob)&&(f=await n(e));return new Uint8Array(f)};return vt=o,vt}var ht,er;function ha(){if(er)return ht;er=1;const n=ca(),o=la(),e=ua(),f=da(),s=fa(),i=va();return ht={defaultOptions:n,spawnWorker:o,terminateWorker:e,onMessage:f,send:s,loadImage:i},ht}var pt,tr;function cr(){if(tr)return pt;tr=1;const n=aa(),o=na(),e=sr(),{log:f}=Lt(),s=Rt(),i=ir(),{defaultOptions:h,spawnWorker:y,terminateWorker:E,onMessage:M,loadImage:T,send:P}=ha();let z=0;return pt=async(B="eng",ee=i.LSTM_ONLY,L={},R={})=>{const j=s("Worker",z),{logger:N,errorHandler:Z,...A}=n({...h,...L}),Q={},_e={},he=typeof B=="string"?B.split("+"):B;let ce=ee,te=R;const ye=[i.DEFAULT,i.LSTM_ONLY].includes(ee)&&!A.legacyCore;let re,Re;const Pe=new Promise((b,w)=>{Re=b,re=w}),Te=b=>{re(b.message)};let J=y(A);J.onerror=Te,z+=1;const H=(b,w)=>{Q[b]=w},pe=(b,w)=>{_e[b]=w},Y=({id:b,action:w,payload:q})=>new Promise((K,W)=>{f(`[${j}]: Start ${b}, action=${w}`);const ue=`${w}-${b}`;H(ue,K),pe(ue,W),P(J,{workerId:j,jobId:b,action:w,payload:q})}),r=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),t=b=>Y(e({id:b,action:"load",payload:{options:{lstmOnly:ye,corePath:A.corePath,logging:A.logging}}})),a=(b,w,q)=>Y(e({id:q,action:"FS",payload:{method:"writeFile",args:[b,w]}})),_=(b,w)=>Y(e({id:w,action:"FS",payload:{method:"readFile",args:[b,{encoding:"utf8"}]}})),p=(b,w)=>Y(e({id:w,action:"FS",payload:{method:"unlink",args:[b]}})),x=(b,w,q)=>Y(e({id:q,action:"FS",payload:{method:b,args:w}})),F=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),D=(b,w)=>Y(e({id:w,action:"loadLanguage",payload:{langs:b,options:{langPath:A.langPath,dataPath:A.dataPath,cachePath:A.cachePath,cacheMethod:A.cacheMethod,gzip:A.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(ce)&&!A.legacyLang}}})),G=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),$=(b,w,q,K)=>Y(e({id:K,action:"initialize",payload:{langs:b,oem:w,config:q}})),we=(b="eng",w,q,K)=>{if(ye&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(w))throw Error("Legacy model requested but code missing.");const W=w||ce;ce=W;const ue=q||te;te=ue;const u=(typeof b=="string"?b.split("+"):b).filter(d=>!he.includes(d));return he.push(...u),u.length>0?D(u,K).then(()=>$(b,W,ue,K)):$(b,W,ue,K)},le=(b={},w)=>Y(e({id:w,action:"setParameters",payload:{params:b}})),ae=async(b,w={},q={blocks:!0,text:!0,hocr:!0,tsv:!0},K)=>Y(e({id:K,action:"recognize",payload:{image:await T(b),options:w,output:q}})),ze=(b="Tesseract OCR Result",w=!1,q)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),Y(e({id:q,action:"getPDF",payload:{title:b,textonly:w}}))),Ue=async(b,w)=>{if(ye)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Y(e({id:w,action:"detect",payload:{image:await T(b)}}))},je=async()=>(J!==null&&(E(J),J=null),Promise.resolve());M(J,({workerId:b,jobId:w,status:q,action:K,data:W})=>{const ue=`${K}-${w}`;if(q==="resolve"){f(`[${b}]: Complete ${w}`);let l=W;K==="recognize"?l=o(W):K==="getPDF"&&(l=Array.from({...W,length:Object.keys(W).length})),Q[ue]({jobId:w,data:l})}else if(q==="reject")if(_e[ue](W),K==="load"&&re(W),Z)Z(W);else throw Error(W);else q==="progress"&&N({...W,userJobId:w})});const Be={id:j,worker:J,setResolve:H,setReject:pe,load:r,writeText:a,readText:_,removeFile:p,FS:x,loadLanguage:F,initialize:G,reinitialize:we,setParameters:le,recognize:ae,getPDF:ze,detect:Ue,terminate:je};return t().then(()=>D(B)).then(()=>$(B,ee,R)).then(()=>Re(Be)).catch(()=>{}),Pe},pt}var gt,rr;function pa(){if(rr)return gt;rr=1;const n=cr();return gt={recognize:async(f,s,i)=>{const h=await n(s,1,i);return h.recognize(f).finally(async()=>{await h.terminate()})},detect:async(f,s)=>{const i=await n("osd",0,s);return i.detect(f).finally(async()=>{await i.terminate()})}},gt}var mt,ar;function ga(){return ar||(ar=1,mt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),mt}var bt,nr;function ma(){return nr||(nr=1,bt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),bt}var _t,or;function ba(){if(or)return _t;or=1,Xr();const n=ea(),o=cr(),e=pa(),f=ga(),s=ir(),i=ma(),{setLogging:h}=Lt();return _t={languages:f,OEM:s,PSM:i,createScheduler:n,createWorker:o,setLogging:h,...e},_t}var _a=ba();const ya=Mr(_a);typeof window<"u"&&(Nr.workerSrc=`${Jr}/pdf.worker.min.mjs`);const wa=[{value:"eng",label:"English",native:"English"},{value:"spa",label:"Spanish",native:"Español"},{value:"fra",label:"French",native:"Français"},{value:"deu",label:"German",native:"Deutsch"},{value:"ita",label:"Italian",native:"Italiano"},{value:"por",label:"Portuguese",native:"Português"},{value:"nld",label:"Dutch",native:"Nederlands"},{value:"pol",label:"Polish",native:"Polski"},{value:"rus",label:"Russian",native:"Русский"},{value:"jpn",label:"Japanese",native:"日本語"},{value:"chi_sim",label:"Chinese (Simplified)",native:"简体中文"},{value:"chi_tra",label:"Chinese (Traditional)",native:"繁體中文"},{value:"kor",label:"Korean",native:"한국어"},{value:"ara",label:"Arabic",native:"العربية"},{value:"hin",label:"Hindi",native:"हिन्दी"}],xa=[{value:"searchable-pdf",label:"Searchable PDF",desc:"Add invisible text layer to PDF"},{value:"text-only",label:"Text Only",desc:"Extract text as .txt file"},{value:"text-and-pdf",label:"Both",desc:"Get searchable PDF and text file"}];let qe=null;async function ka(n){return qe&&await qe.terminate(),qe=await ya.createWorker(n,1,{logger:o=>{o.status}}),qe}async function Ra(n,o,e=2){const f=await n.getPage(o),s=f.getViewport({scale:e}),i=document.createElement("canvas");i.width=s.width,i.height=s.height;const h=i.getContext("2d",{willReadFrequently:!0});return await f.render({canvasContext:h,viewport:s}).promise,{imageData:h.getImageData(0,0,i.width,i.height),width:s.width,height:s.height}}async function La(n,o){const e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").putImageData(o,0,0);const s=await n.recognize(e),i=s.data.words.map(h=>({text:h.text,bbox:h.bbox,confidence:h.confidence}));return{text:s.data.text,confidence:s.data.confidence,words:i}}async function Sa(n,o,e=2){const f=await Ur.load(n),s=f.getPages(),i=await f.embedFont(jr.Helvetica);for(let y=0;y<s.length&&y<o.length;y++){const E=s[y],M=o[y],{width:T,height:P}=E.getSize();for(const z of M.words){const B=z.bbox.x0/e,ee=P-z.bbox.y1/e,L=(z.bbox.y1-z.bbox.y0)/e,R=Math.max(4,Math.min(L*.8,20));E.drawText(z.text,{x:B,y:ee,size:R,font:i,color:Fr(0,0,0),opacity:.01})}}const h=await f.save();return new Blob([h],{type:"application/pdf"})}async function Oa(n,o){const e=performance.now(),{language:f,outputMode:s,onProgress:i}=o;i?.(2,"Initializing OCR engine...");const h=await ka(f);i?.(5,"Loading PDF...");const y=await n.arrayBuffer(),E=y.slice(0),M=await qr({data:E}).promise,T=M.numPages;i?.(10,`Processing ${T} page(s)...`);const P=[],z=2;for(let R=1;R<=T;R++){const j=10+(R-1)/T*70;i?.(j,`OCR page ${R}/${T}...`);const{imageData:N}=await Ra(M,R,z),Z=await La(h,N);P.push(Z)}i?.(80,"Generating output...");const B=P.map((R,j)=>`--- Page ${j+1} ---
${R.text}`).join(`

`),ee=P.reduce((R,j)=>R+j.confidence,0)/P.length;let L;return(s==="searchable-pdf"||s==="text-and-pdf")&&(i?.(85,"Creating searchable PDF..."),L=await Sa(y,P,z)),i?.(95,"Cleaning up..."),await h.terminate(),qe=null,i?.(100,"Complete!"),{searchablePdf:L,text:B,confidence:ee,pageCount:T,processingTimeMs:Math.round(performance.now()-e)}}function Ea(n){const o=n*5,e=n*15;if(e<60)return`${o}-${e} seconds`;{const f=Math.ceil(o/60),s=Math.ceil(e/60);return`${f}-${s} minutes`}}var Pa=U('<div class="text-center"><div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-sky-500/10"><!></div> <h3 class="text-surface-100 mb-1 text-lg font-semibold">Drop your scanned PDFs here</h3> <p class="text-surface-500 mb-4 text-sm">or click to browse files</p> <div class="bg-surface-800 text-surface-400 inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs"><!> PDF files only</div></div>'),Ta=U('<div class="text-surface-400 flex items-center gap-2 text-sm"><!> <span>Drop more files or click to add</span></div>'),Ca=U('<img alt="" class="h-full w-full object-cover"/>'),Aa=U('<div class="flex h-full w-full items-center justify-center"><!></div>'),Da=U("<span> </span>"),$a=U('<p class="text-surface-500 mt-1 text-xs"> </p>'),Ia=U('<div class="mt-2"><div class="bg-surface-700 h-1.5 overflow-hidden rounded-full"><div class="h-full bg-gradient-to-r from-sky-400 to-cyan-500 transition-all duration-300"></div></div> <!></div>'),Ma=U('<div class="mt-2 flex items-center gap-4 text-xs"><span class="flex items-center gap-1 text-green-400"><!> </span> <span class="text-surface-500"> </span></div>'),Na=U('<p class="mt-2 flex items-center gap-1 text-xs text-red-400"><!> </p>'),qa=U('<button class="p-2 text-green-400 transition-colors hover:text-green-300" title="Download Searchable PDF"><!></button>'),Ua=U('<!> <button class="p-2 text-sky-400 transition-colors hover:text-sky-300" title="Download Text"><!></button>',1),ja=U('<div class="glass flex items-start gap-4 rounded-xl p-4"><div class="bg-surface-800 h-16 w-12 flex-shrink-0 overflow-hidden rounded-lg"><!></div> <div class="min-w-0 flex-1"><p class="text-surface-200 truncate text-sm font-medium"> </p> <div class="text-surface-500 mt-1 flex items-center gap-3 text-xs"><span> </span> <!></div> <!></div> <div class="flex items-center gap-1"><!> <button class="text-surface-500 p-2 transition-colors hover:text-red-400" title="Remove"><!></button></div></div>'),Fa=U('<div class="mt-4 space-y-3"></div>'),Ga=U("<option> </option>"),za=U('<button><div class="flex-1 text-left"><p class="text-surface-200 text-sm font-medium"> </p> <p class="text-surface-500 text-xs"> </p></div> <!></button>'),Ba=U('<div class="bg-surface-800/50 border-surface-700 mb-6 rounded-xl border p-3"><div class="flex items-center gap-2 text-sm"><!> <span class="text-surface-300">Estimated time:</span> <span class="font-medium text-sky-400"> </span></div> <p class="text-surface-500 mt-1 text-xs"> </p></div>'),Wa=U("<!> Processing...",1),Ha=U("<!> ",1),Ya=U(`<div class="bg-surface-950 text-surface-200 flex min-h-screen flex-col"><!> <div class="fixed inset-0 -z-10 overflow-hidden"><div class="absolute -right-1/4 -top-1/2 h-[800px] w-[800px] rounded-full bg-gradient-to-br from-sky-500/10 to-cyan-500/10 blur-3xl"></div> <div class="absolute -bottom-1/2 -left-1/4 h-[600px] w-[600px] rounded-full bg-gradient-to-tr from-cyan-500/10 to-sky-500/10 blur-3xl"></div></div> <main class="flex-1 px-4 pb-12 pt-28 sm:px-6 lg:px-8"><div class="mx-auto max-w-5xl"><div class="mb-8 text-center"><div class="mb-4 inline-flex items-center gap-2 rounded-full bg-sky-500/10 px-4 py-1.5 text-sm font-medium text-sky-400"><!> OCR - Text Recognition</div> <h1 class="text-surface-100 text-3xl font-bold">Extract <span class="bg-gradient-to-r from-sky-400 to-cyan-400 bg-clip-text text-transparent">searchable text</span> from scanned PDFs</h1> <p class="text-surface-500 mt-2">Use AI-powered OCR to make scanned documents searchable and selectable</p></div> <div class="grid gap-6 lg:grid-cols-2"><div><div role="button" tabindex="0"><input type="file" accept=".pdf,application/pdf" multiple class="hidden"/> <!></div> <!></div> <div class="glass rounded-2xl p-6"><h3 class="text-surface-100 mb-6 flex items-center gap-2 text-lg font-semibold"><!> OCR Settings</h3> <div class="mb-6"><label class="text-surface-300 mb-3 flex items-center gap-2 text-sm font-medium"><!> Document Language</label> <select class="bg-surface-800 border-surface-700 text-surface-100 w-full rounded-xl border px-4 py-3 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"></select></div> <div class="mb-6"><label class="text-surface-300 mb-3 flex items-center gap-2 text-sm font-medium"><!> Output Format</label> <div class="space-y-2"></div></div> <!> <div class="bg-surface-800/50 border-surface-700 mb-6 rounded-xl border p-3"><p class="text-surface-400 text-sm"><strong class="text-surface-300">How it works:</strong> OCR (Optical Character Recognition)
							scans your PDF images and extracts text, making them searchable and copyable. All processing
							happens locally in your browser.</p></div> <button class="flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-sky-500 to-cyan-500 px-6 py-3 text-base font-semibold text-white shadow-lg shadow-sky-500/30 transition-all hover:scale-[1.02] hover:shadow-xl hover:shadow-sky-500/40 disabled:cursor-not-allowed disabled:opacity-50"><!></button></div></div></div></main> <!></div> <!>`,1);function ln(n,o){wr(o,!0);let e=Me(xr([])),f=Me(!1),s=Me("eng"),i=Me("searchable-pdf"),h,y=Me(!1);const E=Fe(()=>c(e).length>0),M=Fe(()=>c(e).filter(l=>l.status==="completed").length),T=Fe(()=>c(e).reduce((l,u)=>l+(u.pageCount||1),0)),P=Fe(()=>Ea(c(T)));function z(){return`pdf-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async function B(l){const u=l.filter(v=>v.type==="application/pdf"||v.name.endsWith(".pdf"));if(u.length===0){Ze.error("Please select PDF files");return}const d=[];for(const v of u){const C={id:z(),file:v,originalUrl:URL.createObjectURL(v),status:"pending",progress:0};try{C.thumbnail=await zr(v),C.pageCount=await Br(v)}catch(V){console.warn("Failed to get PDF metadata:",V)}d.push(C)}oe(e,[...c(e),...d],!0),Ze.success(`Added ${u.length} PDF(s)`)}function ee(l){const u=c(e).find(d=>d.id===l);u&&URL.revokeObjectURL(u.originalUrl),oe(e,c(e).filter(d=>d.id!==l),!0)}async function L(){if(c(e).length===0)return;oe(f,!0);const l=c(e).filter(u=>u.status==="pending"||u.status==="error");for(const u of l){oe(e,c(e).map(d=>d.id===u.id?{...d,status:"processing",progress:0,progressStage:"Initializing..."}:d),!0);try{const d=await Oa(u.file,{language:c(s),outputMode:c(i),onProgress:(v,C)=>{oe(e,c(e).map(V=>V.id===u.id?{...V,progress:v,progressStage:C}:V),!0)}});oe(e,c(e).map(v=>v.id===u.id?{...v,status:"completed",progress:100,ocrResult:d,progressStage:`Done in ${(d.processingTimeMs/1e3).toFixed(1)}s (${d.confidence.toFixed(0)}% confidence)`}:v),!0)}catch(d){console.error("OCR error:",d),oe(e,c(e).map(v=>v.id===u.id?{...v,status:"error",error:d instanceof Error?d.message:"OCR failed"}:v),!0)}}oe(f,!1),c(M)>0&&Ze.success(`Processed ${c(M)} PDF(s) with OCR`)}function R(l){if(!l.ocrResult?.searchablePdf)return;const u=URL.createObjectURL(l.ocrResult.searchablePdf),d=document.createElement("a");d.href=u,d.download=l.file.name.replace(".pdf","-searchable.pdf"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)}function j(l){if(!l.ocrResult?.text)return;const u=new Blob([l.ocrResult.text],{type:"text/plain"}),d=URL.createObjectURL(u),v=document.createElement("a");v.href=d,v.download=l.file.name.replace(".pdf","-text.txt"),document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(d)}function N(l){l.preventDefault(),oe(y,!0)}function Z(l){l.preventDefault(),oe(y,!1)}function A(l){l.preventDefault(),oe(y,!1);const u=Array.from(l.dataTransfer?.files||[]);B(u)}function Q(l){const u=l.target,d=Array.from(u.files||[]);B(d),u.value=""}var _e=Ya();Cr("1hpxemn",l=>{Rr(()=>{Lr.title="OCR - Extract Text from PDFs - Smash"})});var he=be(_e),ce=m(he);Sr(ce,{});var te=k(ce,4),ye=m(te),re=m(ye),Re=m(re),Pe=m(Re);$t(Pe,{class:"h-4 w-4"}),ke(),g(Re),ke(4),g(re);var Te=k(re,2),J=m(Te),H=m(J);H.__click=()=>h?.click(),H.__keydown=l=>l.key==="Enter"&&h?.click();var pe=m(H);pe.__change=Q,Ir(pe,l=>h=l,()=>h);var Y=k(pe,2);{var r=l=>{var u=Pa(),d=m(u),v=m(d);At(v,{class:"h-8 w-8 text-sky-400"}),g(d);var C=k(d,6),V=m(C);Tt(V,{class:"h-3 w-3"}),ke(),g(C),g(u),O(l,u)},t=l=>{var u=Ta(),d=m(u);At(d,{class:"h-4 w-4"}),ke(2),g(u),O(l,u)};X(Y,l=>{c(E)?l(t,!1):l(r)})}g(H);var a=k(H,2);{var _=l=>{var u=Fa();Ve(u,21,()=>c(e),d=>d.id,(d,v)=>{var C=ja(),V=m(C),Le=m(V);{var Ae=S=>{var I=Ca();ie(()=>Dr(I,"src",c(v).thumbnail)),O(S,I)},We=S=>{var I=Aa(),de=m(I);Tt(de,{class:"text-surface-600 h-6 w-6"}),g(I),O(S,I)};X(Le,S=>{c(v).thumbnail?S(Ae):S(We,!1)})}g(V);var De=k(V,2),Se=m(De),lr=m(Se,!0);g(Se);var He=k(Se,2),Ye=m(He),ur=m(Ye,!0);g(Ye);var dr=k(Ye,2);{var fr=S=>{var I=Da(),de=m(I);g(I),ie(()=>se(de,`• ${c(v).pageCount??""} page${c(v).pageCount!==1?"s":""}`)),O(S,I)};X(dr,S=>{c(v).pageCount&&S(fr)})}g(He);var vr=k(He,2);{var hr=S=>{var I=Ia(),de=m(I),$e=m(de);g(de);var Oe=k(de,2);{var fe=ne=>{var ve=$a(),ge=m(ve,!0);g(ve),ie(()=>se(ge,c(v).progressStage)),O(ne,ve)};X(Oe,ne=>{c(v).progressStage&&ne(fe)})}g(I),ie(()=>$r($e,`width: ${c(v).progress??""}%`)),O(S,I)},pr=S=>{var I=Ce(),de=be(I);{var $e=fe=>{var ne=Ma(),ve=m(ne),ge=m(ve);It(ge,{class:"h-3 w-3"});var Ee=k(ge);g(ve);var me=k(ve,2),xe=m(me);g(me),g(ne),ie((Ie,_r)=>{se(Ee,` ${Ie??""}% confidence`),se(xe,`${_r??""}s`)},[()=>c(v).ocrResult.confidence.toFixed(0),()=>(c(v).ocrResult.processingTimeMs/1e3).toFixed(1)]),O(fe,ne)},Oe=fe=>{var ne=Ce(),ve=be(ne);{var ge=Ee=>{var me=Na(),xe=m(me);Hr(xe,{class:"h-3 w-3"});var Ie=k(xe);g(me),ie(()=>se(Ie,` ${c(v).error??""}`)),O(Ee,me)};X(ve,Ee=>{c(v).status==="error"&&Ee(ge)},!0)}O(fe,ne)};X(de,fe=>{c(v).status==="completed"&&c(v).ocrResult?fe($e):fe(Oe,!1)},!0)}O(S,I)};X(vr,S=>{c(v).status==="processing"?S(hr):S(pr,!1)})}g(De);var St=k(De,2),Ot=m(St);{var gr=S=>{Dt(S,{class:"h-5 w-5 animate-spin text-sky-400"})},mr=S=>{var I=Ce(),de=be(I);{var $e=Oe=>{var fe=Ua(),ne=be(fe);{var ve=me=>{var xe=qa();xe.__click=()=>R(c(v));var Ie=m(xe);Yr(Ie,{class:"h-4 w-4"}),g(xe),O(me,xe)};X(ne,me=>{c(v).ocrResult.searchablePdf&&me(ve)})}var ge=k(ne,2);ge.__click=()=>j(c(v));var Ee=m(ge);Mt(Ee,{class:"h-4 w-4"}),g(ge),O(Oe,fe)};X(de,Oe=>{c(v).status==="completed"&&c(v).ocrResult&&Oe($e)},!0)}O(S,I)};X(Ot,S=>{c(v).status==="processing"?S(gr):S(mr,!1)})}var Ke=k(Ot,2);Ke.__click=()=>ee(c(v).id);var br=m(Ke);Pr(br,{class:"h-4 w-4"}),g(Ke),g(St),g(C),ie(S=>{se(lr,c(v).file.name),se(ur,S)},[()=>Wr(c(v).file.size)]),Ge(1,C,()=>Tr,()=>({duration:200})),O(d,C)}),g(u),Ge(1,u,()=>Pt,()=>({y:20,duration:200})),O(l,u)};X(a,l=>{c(E)&&l(_)})}g(J);var p=k(J,2),x=m(p),F=m(x);Vr(F,{class:"h-5 w-5 text-sky-400"}),ke(),g(x);var D=k(x,2),G=m(D),$=m(G);Qr($,{class:"h-4 w-4 text-sky-400"}),ke(),g(G);var we=k(G,2);Ve(we,21,()=>wa,Et,(l,u)=>{var d=Ga(),v=m(d);g(d);var C={};ie(()=>{se(v,`${c(u).label??""} (${c(u).native??""})`),C!==(C=c(u).value)&&(d.value=(d.__value=c(u).value)??"")}),O(l,d)}),g(we),g(D);var le=k(D,2),ae=m(le),ze=m(ae);Mt(ze,{class:"h-4 w-4 text-sky-400"}),ke(),g(ae);var Ue=k(ae,2);Ve(Ue,21,()=>xa,Et,(l,u)=>{var d=za();d.__click=()=>oe(i,c(u).value,!0);var v=m(d),C=m(v),V=m(C,!0);g(C);var Le=k(C,2),Ae=m(Le,!0);g(Le),g(v);var We=k(v,2);{var De=Se=>{It(Se,{class:"h-5 w-5 flex-shrink-0 text-sky-400"})};X(We,Se=>{c(i)===c(u).value&&Se(De)})}g(d),ie(()=>{Ct(d,1,`flex w-full items-start gap-3 rounded-xl p-3 transition-all ${c(i)===c(u).value?"border border-sky-500/50 bg-sky-500/20":"bg-surface-800 hover:bg-surface-700"}`),se(V,c(u).label),se(Ae,c(u).desc)}),O(l,d)}),g(Ue),g(le);var je=k(le,2);{var Be=l=>{var u=Ba(),d=m(u),v=m(d);Zr(v,{class:"h-4 w-4 text-sky-400"});var C=k(v,4),V=m(C,!0);g(C),g(d);var Le=k(d,2),Ae=m(Le);g(Le),g(u),ie(()=>{se(V,c(P)),se(Ae,`Processing ${c(T)??""} page${c(T)!==1?"s":""} with Tesseract OCR`)}),O(l,u)};X(je,l=>{c(E)&&l(Be)})}var b=k(je,4);b.__click=L;var w=m(b);{var q=l=>{var u=Wa(),d=be(u);Dt(d,{class:"h-5 w-5 animate-spin"}),ke(),O(l,u)},K=l=>{var u=Ha(),d=be(u);$t(d,{class:"h-5 w-5"});var v=k(d);ie(()=>se(v,` Run OCR on ${c(e).length??""} PDF${c(e).length!==1?"s":""}`)),O(l,u)};X(w,l=>{c(f)?l(q):l(K,!1)})}g(b),g(p),g(Te),g(ye),g(te);var W=k(te,2);Or(W),g(he);var ue=k(he,2);Gr(ue,{}),ie(()=>{Ct(H,1,`relative rounded-2xl border-2 border-dashed transition-all duration-200 ${c(y)?"border-sky-400 bg-sky-500/10":"border-surface-700 bg-surface-900/50 hover:border-surface-600"} ${c(E)?"p-4":"p-8"}`),b.disabled=!c(E)||c(f)}),Ge(1,re,()=>Er,()=>({duration:200})),Je("dragover",H,N),Je("dragleave",H,Z),Je("drop",H,A),Ar(we,()=>c(s),l=>oe(s,l)),Ge(1,p,()=>Pt,()=>({y:20,delay:100,duration:200})),O(n,_e),kr()}yr(["click","keydown","change"]);export{ln as component};
